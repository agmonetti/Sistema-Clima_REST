{
  "mediciones": {

    "justificacion": "Se REFERENCIA. Justificacion: Es util para datos que son masivos o que tienen una frecuencia de actualización alta.",

    "_id": "ObjectId()",
    "sensor_id": "// REFERENCIA (VARCHAR/String de 24) a la colección sensores",
    "timestamp": "ISODate",
    "temperatura": "n",
    "humedad": "n"

    }
    ,

    "sensores": {

    "justificacion": "Se INCRUSTA. Justificacion: Al incrustarlo en el documento mediciones, minimizas el número de consultas a la BD al obtener la ubicación en una sola lectura",

    "_id": "ObjectId",
    "nombre": "Estación Sur",

    "configuracion": {
        "tipo_sensor": "T° y Humedad",
        "fechaInicioMedicion": "ISODate",
        "estado_sensor": "activo"
    },

    "ubicacion": { 
        "pais": "Argentina",
        "ciudad": "Buenos Aires",
        "lat": "n",
        "lon": "n"
    }

    },

    "conversaciones": {
    "_id": "ObjectId",
    "participantes":" [ 123, 455] // Claves de los usuarios (user_id de PostgreSQL)",
    "isGroup": "false, // true si hay más de 2 participantes",
    "fechaCreacion": "ISODate",

    "justificacion": "// Arreglo de mensajes incrustado (limitado a N mensajes o a 16MB)",
    "mensajes": [ 
        {
        "remitente_id": 123,
        "mensaje": "txt",
        "fechaEnvio": "ISODate()"
        }
  
    ]
    },
    
    "proceso": {
        "_id": "ObjectId",
        "nombre": "Alerta de Temperatura Máxima",
        "descripción": "Emite alerta cuando T° > 35°C",
        "costo": "n"
    }

    ,"indices": {
        "justificacion": "Creo estos indices para las consutalas mas comunes",
        "uno": "{db.mediciones.createIndex({ sensor_id: 1, timestamp: -1 } )}",
        "dos": "db.sensores.createIndex( {ubicacion.lon: 1, ubicacion.lat: 1 } )",
        "tres": "db.conversaciones.createIndex({ participantes: 1 })"
    }
}