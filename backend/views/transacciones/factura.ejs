<%- include('../partials/header') %>
<%- include('../partials/navbar') %>

<main class="main-content">
    <div class="container">
        <div class="page-header">
            <h1>üßæ Detalle de Factura</h1>
            <a href="/transacciones" class="btn btn-outline">‚Üê Volver</a>
        </div>

        <div class="detail-card invoice-card">
            <div class="invoice-header">
                <div>
                    <h2>Factura #<%= factura.factura_id %></h2>
                    <p class="invoice-date">Fecha: <%= new Date(factura.fechaEmision || factura.fechaSolicitud).toLocaleDateString('es-AR') %></p>
                </div>
                <span class="badge badge-<%= factura.estadoFactura === 'pagada' ? 'success' : factura.estadoFactura === 'pendiente' ? 'warning' : 'danger' %> badge-lg">
                    <%= factura.estadoFactura || 'N/A' %>
                </span>
            </div>

            <div class="invoice-body">
                <div class="invoice-section">
                    <h3>Detalles de la Solicitud</h3>
                    <div class="detail-grid">
                        <div class="detail-item">
                            <span class="label">ID Solicitud</span>
                            <span class="value">#<%= factura.solicitud_id %></span>
                        </div>
                        <div class="detail-item">
                            <span class="label">Proceso</span>
                            <span class="value"><%= factura.proceso_mongo_id %></span>
                        </div>
                        <div class="detail-item">
                            <span class="label">Estado del Proceso</span>
                            <span class="value">
                                <span class="badge badge-<%= factura.isCompleted ? 'success' : 'warning' %>">
                                    <%= factura.isCompleted ? 'Completado' : 'Pendiente' %>
                                </span>
                            </span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="invoice-footer">
                <a href="/transacciones" class="btn btn-primary">Volver a Cuenta</a>
            </div>
        </div>
    </div>
</main>

<%- include('../partials/footer') %>
